# Hardcoded enterprise app name
$appName = "Azure Databricks SCIM Provisioning Connector"  

# Array of security group names 
$groupNames = @("EDP ELZ HUB ADB Workspace Read Prod","EDP ELZ HUB ADB Workspace Read Prod","EDP ELZ HUB ADB Workspace Read Prod","EDP ELZ HUB ADB Workspace Read Prod","EDP ELZ HUB ADB Workspace Read Prod","EDP ELZ HUB ADB Workspace Read Prod","EDP ELZ HUB ADB Workspace Read Prod","EDP ELZ HUB ADB Workspace Run Prod","EDP ELZ HUB ADB Workspace Run Prod","EDP ELZ HUB ADB Workspace Run Prod","EDP ELZ HUB ADB Workspace Run Prod","EDP ELZ HUB ADB Workspace Run Prod","EDP ELZ HUB ADB Workspace Run Prod","EDP ELZ HUB ADB Workspace Run Prod","EDP ELZ HUB ADB Workspace Edit Prod","EDP ELZ HUB ADB Workspace Edit Prod","EDP ELZ HUB ADB Workspace Edit Prod","EDP ELZ HUB ADB Workspace Edit Prod","EDP ELZ HUB ADB Workspace Edit Prod","EDP ELZ HUB ADB Workspace Edit Prod","EDP ELZ HUB ADB Workspace Edit Prod","EDP ELZ HUB ADB Workspace Manager Prod","EDP ELZ HUB ADB Workspace Manager Prod","EDP ELZ HUB ADB Workspace Manager Prod","EDP ELZ HUB ADB Cluster Attach To Prod","EDP ELZ HUB ADB Cluster Attach To Prod","EDP ELZ HUB ADB Cluster Attach To Prod","EDP ELZ HUB ADB Cluster Attach To Prod","EDP ELZ HUB ADB Cluster Attach To Prod","EDP ELZ HUB ADB Cluster Attach To Prod","EDP ELZ HUB ADB Cluster Attach To Prod","EDP ELZ HUB ADB Cluster Restart Prod","EDP ELZ HUB ADB Cluster Restart Prod","EDP ELZ HUB ADB Cluster Restart Prod","EDP ELZ HUB ADB Cluster Restart Prod","EDP ELZ HUB ADB Cluster Restart Prod","EDP ELZ HUB ADB Cluster Restart Prod","EDP ELZ HUB ADB Cluster Restart Prod","EDP ELZ HUB ADB Cluster Manage Prod","EDP ELZ HUB ADB Cluster Manage Prod","EDP ELZ HUB ADB Cluster Manage Prod","EDP ELZ HUB ADB Job View Prod","EDP ELZ HUB ADB Job View Prod","EDP ELZ HUB ADB Job View Prod","EDP ELZ HUB ADB Job View Prod","EDP ELZ HUB ADB Job View Prod","EDP ELZ HUB ADB Job View Prod","EDP ELZ HUB ADB Job View Prod","EDP ELZ HUB ADB Job Manage Run Prod","EDP ELZ HUB ADB Job Manage Run Prod","EDP ELZ HUB ADB Job Manage Run Prod","EDP ELZ HUB ADB Job Manage Run Prod","EDP ELZ HUB ADB Job Manage Run Prod","EDP ELZ HUB ADB Job Manage Run Prod","EDP ELZ HUB ADB Job Manage Run Prod","EDP ELZ HUB ADB Job Owner Prod","EDP ELZ HUB ADB Job Owner Prod","EDP ELZ HUB ADB Job Owner Prod","EDP ELZ HUB ADB Job Owner Prod","EDP ELZ HUB ADB Job Owner Prod","EDP ELZ HUB ADB Job Manage Prod","EDP ELZ HUB ADB Job Manage Prod","EDP ELZ HUB ADB Job Manage Prod","EDP ELZ HUB ADB Job Manage Prod","EDP ELZ HUB ADB Job Manage Prod","EDP ELZ HUB ADB Secret Read Prod","EDP ELZ HUB ADB Secret Read Prod","EDP ELZ HUB ADB Secret Read Prod","EDP ELZ HUB ADB Secret Read Prod","EDP ELZ HUB ADB Secret Read Prod","EDP ELZ HUB ADB Secret Read Prod","EDP ELZ HUB ADB Secret Read Prod","EDP ELZ HUB ADB Secret Write Prod","EDP ELZ HUB ADB Secret Manage Prod","EDP ELZ HUB ADB Dashboard Read Prod","EDP ELZ HUB ADB Dashboard Run Prod","EDP HUB ADB Query Read Prod","EDP HUB ADB Query Run Prod","EDP ELZ HUB ADB Workspace Read Non-Prod","EDP ELZ HUB ADB Workspace Read Non-Prod","EDP ELZ HUB ADB Workspace Read Non-Prod","EDP ELZ HUB ADB Workspace Read Non-Prod","EDP ELZ HUB ADB Workspace Read Non-Prod","EDP ELZ HUB ADB Workspace Read Non-Prod","EDP ELZ HUB ADB Workspace Read Non-Prod","EDP ELZ HUB ADB Workspace Run Non-Prod","EDP ELZ HUB ADB Workspace Run Non-Prod","EDP ELZ HUB ADB Workspace Run Non-Prod","EDP ELZ HUB ADB Workspace Run Non-Prod","EDP ELZ HUB ADB Workspace Run Non-Prod","EDP ELZ HUB ADB Workspace Run Non-Prod","EDP ELZ HUB ADB Workspace Run Non-Prod","EDP ELZ HUB ADB Workspace Edit Non-Prod","EDP ELZ HUB ADB Workspace Edit Non-Prod","EDP ELZ HUB ADB Workspace Edit Non-Prod","EDP ELZ HUB ADB Workspace Edit Non-Prod","EDP ELZ HUB ADB Workspace Edit Non-Prod","EDP ELZ HUB ADB Workspace Edit Non-Prod","EDP ELZ HUB ADB Workspace Edit Non-Prod","EDP ELZ HUB ADB Workspace Manage Non-Prod","EDP ELZ HUB ADB Workspace Manage Non-Prod","EDP ELZ HUB ADB Workspace Manage Non-Prod","EDP ELZ HUB ADB Workspace Manage Non-Prod","EDP ELZ HUB ADB Workspace Manage Non-Prod","EDP ELZ HUB ADB Cluster Attach To Non-Prod","EDP ELZ HUB ADB Cluster Attach To Non-Prod","EDP ELZ HUB ADB Cluster Attach To Non-Prod","EDP ELZ HUB ADB Cluster Attach To Non-Prod","EDP ELZ HUB ADB Cluster Attach To Non-Prod","EDP ELZ HUB ADB Cluster Attach To Non-Prod","EDP ELZ HUB ADB Cluster Attach To Non-Prod","EDP ELZ HUB ADB Cluster Restart Non-Prod","EDP ELZ HUB ADB Cluster Restart Non-Prod","EDP ELZ HUB ADB Cluster Restart Non-Prod","EDP ELZ HUB ADB Cluster Restart Non-Prod","EDP ELZ HUB ADB Cluster Restart Non-Prod","EDP ELZ HUB ADB Cluster Restart Non-Prod","EDP ELZ HUB ADB Cluster Restart Non-Prod","EDP ELZ HUB ADB Cluster Manage Non-Prod","EDP ELZ HUB ADB Cluster Manage Non-Prod","EDP ELZ HUB ADB Cluster Manage Non-Prod","EDP ELZ HUB ADB Cluster Manage Non-Prod","EDP ELZ HUB ADB Cluster Manage Non-Prod","EDP ELZ HUB ADB Job View Non-Prod","EDP ELZ HUB ADB Job View Non-Prod","EDP ELZ HUB ADB Job View Non-Prod","EDP ELZ HUB ADB Job View Non-Prod","EDP ELZ HUB ADB Job View Non-Prod","EDP ELZ HUB ADB Job View Non-Prod","EDP ELZ HUB ADB Job View Non-Prod","EDP ELZ HUB ADB Job Manage Run Non-Prod","EDP ELZ HUB ADB Job Manage Run Non-Prod","EDP ELZ HUB ADB Job Manage Run Non-Prod","EDP ELZ HUB ADB Job Manage Run Non-Prod","EDP ELZ HUB ADB Job Manage Run Non-Prod","EDP ELZ HUB ADB Job Manage Run Non-Prod","EDP ELZ HUB ADB Job Manage Run Non-Prod","EDP ELZ HUB ADB Job Owner Non-Prod","EDP ELZ HUB ADB Job Owner Non-Prod","EDP ELZ HUB ADB Job Owner Non-Prod","EDP ELZ HUB ADB Job Owner Non-Prod","EDP ELZ HUB ADB Job Owner Non-Prod","EDP ELZ HUB ADB Job Owner Non-Prod","EDP ELZ HUB ADB Job Owner Non-Prod","EDP ELZ HUB ADB Job Manage Non-Prod","EDP ELZ HUB ADB Job Manage Non-Prod","EDP ELZ HUB ADB Job Manage Non-Prod","EDP ELZ HUB ADB Job Manage Non-Prod","EDP ELZ HUB ADB Job Manage Non-Prod","EDP ELZ HUB ADB Job Manage Non-Prod","EDP ELZ HUB ADB Job Manage Non-Prod","EDP ELZ HUB ADB Secret Read Non-Prod","EDP ELZ HUB ADB Secret Read Non-Prod","EDP ELZ HUB ADB Secret Read Non-Prod","EDP ELZ HUB ADB Secret Read Non-Prod","EDP ELZ HUB ADB Secret Read Non-Prod","EDP ELZ HUB ADB Secret Read Non-Prod","EDP ELZ HUB ADB Secret Read Non-Prod","EDP ELZ HUB ADB Secret Write Non-Prod","EDP ELZ HUB ADB Secret Write Non-Prod","EDP ELZ HUB ADB Secret Write Non-Prod","EDP ELZ HUB ADB Secret Write Non-Prod","EDP ELZ HUB ADB Secret Write Non-Prod","EDP ELZ HUB ADB Secret Manage Non-Prod","EDP ELZ HUB ADB Secret Manage Non-Prod","EDP ELZ HUB ADB Secret Manage Non-Prod","EDP ELZ HUB ADB Secret Manage Non-Prod","EDP ELZ HUB ADB Secret Manage Non-Prod","EDP HUB ADB Query View Non-Prod","EDP HUB ADB Query Run Non-Prod","EDP HUB ADB Query Edit Non-Prod","EDP HUB ADB Query Manage Non-Prod","EDP ELZ HUB ADB Dashboard View Non-Prod","EDP ELZ HUB ADB Dashboard Query Non-Prod","EDP ELZ HUB ADB Dashboard Manage Non-Prod","EDP ELZ Retail ADB Workspace Read Prod","EDP ELZ Retail ADB Workspace Read Prod","EDP ELZ Retail ADB Workspace Read Prod","EDP ELZ Retail ADB Workspace Read Prod","EDP ELZ Retail ADB Workspace Read Prod","EDP ELZ Retail ADB Workspace Read Prod","EDP ELZ Retail ADB Workspace Read Prod","EDP ELZ Retail ADB Workspace Run Prod","EDP ELZ Retail ADB Workspace Run Prod","EDP ELZ Retail ADB Workspace Run Prod","EDP ELZ Retail ADB Workspace Run Prod","EDP ELZ Retail ADB Workspace Run Prod","EDP ELZ Retail ADB Workspace Run Prod","EDP ELZ Retail ADB Workspace Run Prod","EDP ELZ Retail ADB Workspace Edit Prod","EDP ELZ Retail ADB Workspace Edit Prod","EDP ELZ Retail ADB Workspace Edit Prod","EDP ELZ Retail ADB Workspace Edit Prod","EDP ELZ Retail ADB Workspace Edit Prod","EDP ELZ Retail ADB Workspace Edit Prod","EDP ELZ Retail ADB Workspace Edit Prod","EDP ELZ Retail ADB Workspace Manage Prod","EDP ELZ Retail ADB Workspace Manage Prod","EDP ELZ Retail ADB Workspace Manage Prod","EDP ELZ Retail ADB Workspace Manage Prod","EDP ELZ Retail ADB Cluster Attach To Prod","EDP ELZ Retail ADB Cluster Attach To Prod","EDP ELZ Retail ADB Cluster Attach To Prod","EDP ELZ Retail ADB Cluster Attach To Prod","EDP ELZ Retail ADB Cluster Attach To Prod","EDP ELZ Retail ADB Cluster Attach To Prod","EDP ELZ Retail ADB Cluster Attach To Prod","EDP ELZ Retail ADB Cluster Restart To Prod","EDP ELZ Retail ADB Cluster Restart To Prod","EDP ELZ Retail ADB Cluster Restart To Prod","EDP ELZ Retail ADB Cluster Restart To Prod","EDP ELZ Retail ADB Cluster Restart To Prod","EDP ELZ Retail ADB Cluster Restart To Prod","EDP ELZ Retail ADB Cluster Restart To Prod","EDP ELZ Retail ADB Cluster Manage To Prod","EDP ELZ Retail ADB Cluster Manage To Prod","EDP ELZ Retail ADB Cluster Manage To Prod","EDP ELZ Retail ADB Cluster Manage To Prod","EDP ELZ Retail ADB Job View Prod","EDP ELZ Retail ADB Job View Prod","EDP ELZ Retail ADB Job View Prod","EDP ELZ Retail ADB Job View Prod","EDP ELZ Retail ADB Job View Prod","EDP ELZ Retail ADB Job View Prod","EDP ELZ Retail ADB Job View Prod","EDP ELZ Retail ADB Job Run Prod","EDP ELZ Retail ADB Job Run Prod","EDP ELZ Retail ADB Job Run Prod","EDP ELZ Retail ADB Job Run Prod","EDP ELZ Retail ADB Job Run Prod","EDP ELZ Retail ADB Job Run Prod","EDP ELZ Retail ADB Job Run Prod","EDP ELZ Retail ADB Job Owner Prod","EDP ELZ Retail ADB Job Owner Prod","EDP ELZ Retail ADB Job Owner Prod","EDP ELZ Retail ADB Job Owner Prod","EDP ELZ Retail ADB Job Owner Prod","EDP ELZ Retail ADB Job Owner Prod","EDP ELZ Retail ADB Job Manage Prod","EDP ELZ Retail ADB Job Manage Prod","EDP ELZ Retail ADB Job Manage Prod","EDP ELZ Retail ADB Job Manage Prod","EDP ELZ Retail ADB Job Manage Prod","EDP ELZ Retail ADB Job Manage Prod","EDP ELZ Retail ADB Secret Read Prod","EDP ELZ Retail ADB Secret Read Prod","EDP ELZ Retail ADB Secret Read Prod","EDP ELZ Retail ADB Secret Read Prod","EDP ELZ Retail ADB Secret Read Prod","EDP ELZ Retail ADB Secret Read Prod","EDP ELZ Retail ADB Secret Read Prod","EDP ELZ Retail ADB Secret Write Prod","EDP ELZ Retail ADB Secret Manage Prod","EDP ELZ Retail ADB Dashboard Read Prod","EDP ELZ Retail ADB Dashboard Run Prod","EDP ELZ Retail ADB Query Read Prod","EDP ELZ Retail ADB Query Run Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Data Analyst FA Prod","Role EDP ELZ DB Data Engineer FA Prod","Role EDP ELZ DB Platform Engineer FA Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Data Analyst FA Prod","Role EDP ELZ DB Data Engineer FA Prod","Role EDP ELZ DB Platform Engineer FA Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Data Analyst FA Prod","Role EDP ELZ DB Data Engineer FA Prod","Role EDP ELZ DB Platform Engineer FA Prod","Role EDP ELZ DB Citizen Data Analyst FA Prod","Role EDP ELZ DB Citizen Data Engineer FA Prod","Role EDP ELZ DB Data Analyst FA Prod","Role EDP ELZ DB Data Engineer FA Prod","Role EDP ELZ DB Platform Engineer FA Prod","Role EDP ELZ DB Citizen Data Analyst FA Prod","Role EDP ELZ DB Citizen Data Engineer FA Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Platform Engineer FA Prod","Role EDP ELZ DB Platform Engineer FA Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Scientist Prod")




# Get service principal by name 
$app = Get-AzureADServicePrincipal -Filter "DisplayName eq '$appName'"  

# Get objectIds for the security groups
$groupIds = $groupNames | ForEach-Object { 
    (Get-AzureADGroup -SearchString $_).ObjectId 
}

# Update membership claims
Update-AzureADServicePrincipal -ObjectId $app.ObjectId -GroupMembershipClaims @(
    New-Object Microsoft.Open.AzureAD.Model.GroupIdsForMembershipCheck -ArgumentList $groupIds  
)

--------------------------------------------

New-Object: 
Line |
   2 |      New-Object Microsoft.Open.AzureAD.Model.GroupIdsForMembershipChec â€¦
     |      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
     | Cannot find an overload for "GroupIdsForMembershipCheck" and the argument count: "2".
WARNING: Update-AzureADServicePrincipal is not found. The most similar Azure PowerShell command is:
        Update-AzADServicePrincipal
WARNING: The intelligent recommendation feature is in preview. Help us improve it by sharing your experience: https://go.microsoft.com/fwlink/?linkid=2202436
Update-AzureADServicePrincipal: The term 'Update-AzureADServicePrincipal' is not recognized as a name of a cmdlet, function, script file, or executable program.
Check the spelling of the name, or if a path was included, verify that the path is correct and try again.

-----------------------------------------------


Import-Module AzureAD

$appName = "My Application"
$groupNames = @("EDP ELZ HUB ADB Workspace Read Prod","EDP ELZ HUB ADB Workspace Read Prod","EDP ELZ HUB ADB Workspace Read Prod","EDP ELZ HUB ADB Workspace Read Prod","EDP ELZ HUB ADB Workspace Read Prod","EDP ELZ HUB ADB Workspace Read Prod","EDP ELZ HUB ADB Workspace Read Prod","EDP ELZ HUB ADB Workspace Run Prod","EDP ELZ HUB ADB Workspace Run Prod","EDP ELZ HUB ADB Workspace Run Prod","EDP ELZ HUB ADB Workspace Run Prod","EDP ELZ HUB ADB Workspace Run Prod","EDP ELZ HUB ADB Workspace Run Prod","EDP ELZ HUB ADB Workspace Run Prod","EDP ELZ HUB ADB Workspace Edit Prod","EDP ELZ HUB ADB Workspace Edit Prod","EDP ELZ HUB ADB Workspace Edit Prod","EDP ELZ HUB ADB Workspace Edit Prod","EDP ELZ HUB ADB Workspace Edit Prod","EDP ELZ HUB ADB Workspace Edit Prod","EDP ELZ HUB ADB Workspace Edit Prod","EDP ELZ HUB ADB Workspace Manager Prod","EDP ELZ HUB ADB Workspace Manager Prod","EDP ELZ HUB ADB Workspace Manager Prod","EDP ELZ HUB ADB Cluster Attach To Prod","EDP ELZ HUB ADB Cluster Attach To Prod","EDP ELZ HUB ADB Cluster Attach To Prod","EDP ELZ HUB ADB Cluster Attach To Prod","EDP ELZ HUB ADB Cluster Attach To Prod","EDP ELZ HUB ADB Cluster Attach To Prod","EDP ELZ HUB ADB Cluster Attach To Prod","EDP ELZ HUB ADB Cluster Restart Prod","EDP ELZ HUB ADB Cluster Restart Prod","EDP ELZ HUB ADB Cluster Restart Prod","EDP ELZ HUB ADB Cluster Restart Prod","EDP ELZ HUB ADB Cluster Restart Prod","EDP ELZ HUB ADB Cluster Restart Prod","EDP ELZ HUB ADB Cluster Restart Prod","EDP ELZ HUB ADB Cluster Manage Prod","EDP ELZ HUB ADB Cluster Manage Prod","EDP ELZ HUB ADB Cluster Manage Prod","EDP ELZ HUB ADB Job View Prod","EDP ELZ HUB ADB Job View Prod","EDP ELZ HUB ADB Job View Prod","EDP ELZ HUB ADB Job View Prod","EDP ELZ HUB ADB Job View Prod","EDP ELZ HUB ADB Job View Prod","EDP ELZ HUB ADB Job View Prod","EDP ELZ HUB ADB Job Manage Run Prod","EDP ELZ HUB ADB Job Manage Run Prod","EDP ELZ HUB ADB Job Manage Run Prod","EDP ELZ HUB ADB Job Manage Run Prod","EDP ELZ HUB ADB Job Manage Run Prod","EDP ELZ HUB ADB Job Manage Run Prod","EDP ELZ HUB ADB Job Manage Run Prod","EDP ELZ HUB ADB Job Owner Prod","EDP ELZ HUB ADB Job Owner Prod","EDP ELZ HUB ADB Job Owner Prod","EDP ELZ HUB ADB Job Owner Prod","EDP ELZ HUB ADB Job Owner Prod","EDP ELZ HUB ADB Job Manage Prod","EDP ELZ HUB ADB Job Manage Prod","EDP ELZ HUB ADB Job Manage Prod","EDP ELZ HUB ADB Job Manage Prod","EDP ELZ HUB ADB Job Manage Prod","EDP ELZ HUB ADB Secret Read Prod","EDP ELZ HUB ADB Secret Read Prod","EDP ELZ HUB ADB Secret Read Prod","EDP ELZ HUB ADB Secret Read Prod","EDP ELZ HUB ADB Secret Read Prod","EDP ELZ HUB ADB Secret Read Prod","EDP ELZ HUB ADB Secret Read Prod","EDP ELZ HUB ADB Secret Write Prod","EDP ELZ HUB ADB Secret Manage Prod","EDP ELZ HUB ADB Dashboard Read Prod","EDP ELZ HUB ADB Dashboard Run Prod","EDP HUB ADB Query Read Prod","EDP HUB ADB Query Run Prod","EDP ELZ HUB ADB Workspace Read Non-Prod","EDP ELZ HUB ADB Workspace Read Non-Prod","EDP ELZ HUB ADB Workspace Read Non-Prod","EDP ELZ HUB ADB Workspace Read Non-Prod","EDP ELZ HUB ADB Workspace Read Non-Prod","EDP ELZ HUB ADB Workspace Read Non-Prod","EDP ELZ HUB ADB Workspace Read Non-Prod","EDP ELZ HUB ADB Workspace Run Non-Prod","EDP ELZ HUB ADB Workspace Run Non-Prod","EDP ELZ HUB ADB Workspace Run Non-Prod","EDP ELZ HUB ADB Workspace Run Non-Prod","EDP ELZ HUB ADB Workspace Run Non-Prod","EDP ELZ HUB ADB Workspace Run Non-Prod","EDP ELZ HUB ADB Workspace Run Non-Prod","EDP ELZ HUB ADB Workspace Edit Non-Prod","EDP ELZ HUB ADB Workspace Edit Non-Prod","EDP ELZ HUB ADB Workspace Edit Non-Prod","EDP ELZ HUB ADB Workspace Edit Non-Prod","EDP ELZ HUB ADB Workspace Edit Non-Prod","EDP ELZ HUB ADB Workspace Edit Non-Prod","EDP ELZ HUB ADB Workspace Edit Non-Prod","EDP ELZ HUB ADB Workspace Manage Non-Prod","EDP ELZ HUB ADB Workspace Manage Non-Prod","EDP ELZ HUB ADB Workspace Manage Non-Prod","EDP ELZ HUB ADB Workspace Manage Non-Prod","EDP ELZ HUB ADB Workspace Manage Non-Prod","EDP ELZ HUB ADB Cluster Attach To Non-Prod","EDP ELZ HUB ADB Cluster Attach To Non-Prod","EDP ELZ HUB ADB Cluster Attach To Non-Prod","EDP ELZ HUB ADB Cluster Attach To Non-Prod","EDP ELZ HUB ADB Cluster Attach To Non-Prod","EDP ELZ HUB ADB Cluster Attach To Non-Prod","EDP ELZ HUB ADB Cluster Attach To Non-Prod","EDP ELZ HUB ADB Cluster Restart Non-Prod","EDP ELZ HUB ADB Cluster Restart Non-Prod","EDP ELZ HUB ADB Cluster Restart Non-Prod","EDP ELZ HUB ADB Cluster Restart Non-Prod","EDP ELZ HUB ADB Cluster Restart Non-Prod","EDP ELZ HUB ADB Cluster Restart Non-Prod","EDP ELZ HUB ADB Cluster Restart Non-Prod","EDP ELZ HUB ADB Cluster Manage Non-Prod","EDP ELZ HUB ADB Cluster Manage Non-Prod","EDP ELZ HUB ADB Cluster Manage Non-Prod","EDP ELZ HUB ADB Cluster Manage Non-Prod","EDP ELZ HUB ADB Cluster Manage Non-Prod","EDP ELZ HUB ADB Job View Non-Prod","EDP ELZ HUB ADB Job View Non-Prod","EDP ELZ HUB ADB Job View Non-Prod","EDP ELZ HUB ADB Job View Non-Prod","EDP ELZ HUB ADB Job View Non-Prod","EDP ELZ HUB ADB Job View Non-Prod","EDP ELZ HUB ADB Job View Non-Prod","EDP ELZ HUB ADB Job Manage Run Non-Prod","EDP ELZ HUB ADB Job Manage Run Non-Prod","EDP ELZ HUB ADB Job Manage Run Non-Prod","EDP ELZ HUB ADB Job Manage Run Non-Prod","EDP ELZ HUB ADB Job Manage Run Non-Prod","EDP ELZ HUB ADB Job Manage Run Non-Prod","EDP ELZ HUB ADB Job Manage Run Non-Prod","EDP ELZ HUB ADB Job Owner Non-Prod","EDP ELZ HUB ADB Job Owner Non-Prod","EDP ELZ HUB ADB Job Owner Non-Prod","EDP ELZ HUB ADB Job Owner Non-Prod","EDP ELZ HUB ADB Job Owner Non-Prod","EDP ELZ HUB ADB Job Owner Non-Prod","EDP ELZ HUB ADB Job Owner Non-Prod","EDP ELZ HUB ADB Job Manage Non-Prod","EDP ELZ HUB ADB Job Manage Non-Prod","EDP ELZ HUB ADB Job Manage Non-Prod","EDP ELZ HUB ADB Job Manage Non-Prod","EDP ELZ HUB ADB Job Manage Non-Prod","EDP ELZ HUB ADB Job Manage Non-Prod","EDP ELZ HUB ADB Job Manage Non-Prod","EDP ELZ HUB ADB Secret Read Non-Prod","EDP ELZ HUB ADB Secret Read Non-Prod","EDP ELZ HUB ADB Secret Read Non-Prod","EDP ELZ HUB ADB Secret Read Non-Prod","EDP ELZ HUB ADB Secret Read Non-Prod","EDP ELZ HUB ADB Secret Read Non-Prod","EDP ELZ HUB ADB Secret Read Non-Prod","EDP ELZ HUB ADB Secret Write Non-Prod","EDP ELZ HUB ADB Secret Write Non-Prod","EDP ELZ HUB ADB Secret Write Non-Prod","EDP ELZ HUB ADB Secret Write Non-Prod","EDP ELZ HUB ADB Secret Write Non-Prod","EDP ELZ HUB ADB Secret Manage Non-Prod","EDP ELZ HUB ADB Secret Manage Non-Prod","EDP ELZ HUB ADB Secret Manage Non-Prod","EDP ELZ HUB ADB Secret Manage Non-Prod","EDP ELZ HUB ADB Secret Manage Non-Prod","EDP HUB ADB Query View Non-Prod","EDP HUB ADB Query Run Non-Prod","EDP HUB ADB Query Edit Non-Prod","EDP HUB ADB Query Manage Non-Prod","EDP ELZ HUB ADB Dashboard View Non-Prod","EDP ELZ HUB ADB Dashboard Query Non-Prod","EDP ELZ HUB ADB Dashboard Manage Non-Prod","EDP ELZ Retail ADB Workspace Read Prod","EDP ELZ Retail ADB Workspace Read Prod","EDP ELZ Retail ADB Workspace Read Prod","EDP ELZ Retail ADB Workspace Read Prod","EDP ELZ Retail ADB Workspace Read Prod","EDP ELZ Retail ADB Workspace Read Prod","EDP ELZ Retail ADB Workspace Read Prod","EDP ELZ Retail ADB Workspace Run Prod","EDP ELZ Retail ADB Workspace Run Prod","EDP ELZ Retail ADB Workspace Run Prod","EDP ELZ Retail ADB Workspace Run Prod","EDP ELZ Retail ADB Workspace Run Prod","EDP ELZ Retail ADB Workspace Run Prod","EDP ELZ Retail ADB Workspace Run Prod","EDP ELZ Retail ADB Workspace Edit Prod","EDP ELZ Retail ADB Workspace Edit Prod","EDP ELZ Retail ADB Workspace Edit Prod","EDP ELZ Retail ADB Workspace Edit Prod","EDP ELZ Retail ADB Workspace Edit Prod","EDP ELZ Retail ADB Workspace Edit Prod","EDP ELZ Retail ADB Workspace Edit Prod","EDP ELZ Retail ADB Workspace Manage Prod","EDP ELZ Retail ADB Workspace Manage Prod","EDP ELZ Retail ADB Workspace Manage Prod","EDP ELZ Retail ADB Workspace Manage Prod","EDP ELZ Retail ADB Cluster Attach To Prod","EDP ELZ Retail ADB Cluster Attach To Prod","EDP ELZ Retail ADB Cluster Attach To Prod","EDP ELZ Retail ADB Cluster Attach To Prod","EDP ELZ Retail ADB Cluster Attach To Prod","EDP ELZ Retail ADB Cluster Attach To Prod","EDP ELZ Retail ADB Cluster Attach To Prod","EDP ELZ Retail ADB Cluster Restart To Prod","EDP ELZ Retail ADB Cluster Restart To Prod","EDP ELZ Retail ADB Cluster Restart To Prod","EDP ELZ Retail ADB Cluster Restart To Prod","EDP ELZ Retail ADB Cluster Restart To Prod","EDP ELZ Retail ADB Cluster Restart To Prod","EDP ELZ Retail ADB Cluster Restart To Prod","EDP ELZ Retail ADB Cluster Manage To Prod","EDP ELZ Retail ADB Cluster Manage To Prod","EDP ELZ Retail ADB Cluster Manage To Prod","EDP ELZ Retail ADB Cluster Manage To Prod","EDP ELZ Retail ADB Job View Prod","EDP ELZ Retail ADB Job View Prod","EDP ELZ Retail ADB Job View Prod","EDP ELZ Retail ADB Job View Prod","EDP ELZ Retail ADB Job View Prod","EDP ELZ Retail ADB Job View Prod","EDP ELZ Retail ADB Job View Prod","EDP ELZ Retail ADB Job Run Prod","EDP ELZ Retail ADB Job Run Prod","EDP ELZ Retail ADB Job Run Prod","EDP ELZ Retail ADB Job Run Prod","EDP ELZ Retail ADB Job Run Prod","EDP ELZ Retail ADB Job Run Prod","EDP ELZ Retail ADB Job Run Prod","EDP ELZ Retail ADB Job Owner Prod","EDP ELZ Retail ADB Job Owner Prod","EDP ELZ Retail ADB Job Owner Prod","EDP ELZ Retail ADB Job Owner Prod","EDP ELZ Retail ADB Job Owner Prod","EDP ELZ Retail ADB Job Owner Prod","EDP ELZ Retail ADB Job Manage Prod","EDP ELZ Retail ADB Job Manage Prod","EDP ELZ Retail ADB Job Manage Prod","EDP ELZ Retail ADB Job Manage Prod","EDP ELZ Retail ADB Job Manage Prod","EDP ELZ Retail ADB Job Manage Prod","EDP ELZ Retail ADB Secret Read Prod","EDP ELZ Retail ADB Secret Read Prod","EDP ELZ Retail ADB Secret Read Prod","EDP ELZ Retail ADB Secret Read Prod","EDP ELZ Retail ADB Secret Read Prod","EDP ELZ Retail ADB Secret Read Prod","EDP ELZ Retail ADB Secret Read Prod","EDP ELZ Retail ADB Secret Write Prod","EDP ELZ Retail ADB Secret Manage Prod","EDP ELZ Retail ADB Dashboard Read Prod","EDP ELZ Retail ADB Dashboard Run Prod","EDP ELZ Retail ADB Query Read Prod","EDP ELZ Retail ADB Query Run Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Data Analyst FA Prod","Role EDP ELZ DB Data Engineer FA Prod","Role EDP ELZ DB Platform Engineer FA Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Data Analyst FA Prod","Role EDP ELZ DB Data Engineer FA Prod","Role EDP ELZ DB Platform Engineer FA Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Data Analyst FA Prod","Role EDP ELZ DB Data Engineer FA Prod","Role EDP ELZ DB Platform Engineer FA Prod","Role EDP ELZ DB Citizen Data Analyst FA Prod","Role EDP ELZ DB Citizen Data Engineer FA Prod","Role EDP ELZ DB Data Analyst FA Prod","Role EDP ELZ DB Data Engineer FA Prod","Role EDP ELZ DB Platform Engineer FA Prod","Role EDP ELZ DB Citizen Data Analyst FA Prod","Role EDP ELZ DB Citizen Data Engineer FA Prod","Role EDP ELZ DB Data Analyst Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Engineer Prod","Role EDP ELZ DB Platform Engineer Prod","Role EDP ELZ DB Data Quality Analyst Prod","Role EDP ELZ DB Citizen Data Analyst Prod","Role EDP ELZ DB Citizen Data Engineer Prod","Role EDP ELZ DB Platform Engineer FA Prod","Role EDP ELZ DB Platform Engineer FA Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Scientist Prod","Role EDP ELZ DB Data Scientist Prod")


$app = Get-AzureADServicePrincipal -Filter "DisplayName eq '$appName'"

$groupIds = $groupNames | ForEach-Object { 
    (Get-AzureADGroup -SearchString $_).ObjectId  
}

$memberGroups = New-Object 'Microsoft.Open.AzureAD.Model.GroupIdsForMembershipCheck' 
$memberGroups.GroupIds = $groupIds

Update-AzureADServicePrincipal -ObjectId $app.ObjectId -GroupMembershipClaims $memberGroups
