
# New enterprise app display name  
$app_name = ""
# Group names
$groupNames = @()

# Get groups
$groups = foreach ($name in $groupNames) {
    Get-AzureADGroup -SearchString $name  
}

# Get updated service principal
$sp = Get-AzureADServicePrincipal -Filter "displayName eq '$app_name'"  

# Access role ID 
$defaultAccessRoleId = "00000000-0000-0000-0000-000000000000"   

# Assign groups
foreach ($group in $groups) {
    New-AzureADGroupAppRoleAssignment -ObjectId $group.ObjectId -PrincipalId $group.ObjectId -ResourceId $sp.ObjectId -Id $defaultAccessRoleId   
}                                


